\subsection{\acrlong{pep}}
\label{chap:analysis-pep}
\acrfull{pep} is an initiative which aims to simplify end-to-end communication security. It is developed by two entities:
\vspace{-5pt}
\begin{enumerate}
	\item \acrshort{pep} Foundation, a non-profit organization based in Switzerland, owning trademarks and the pEp engine
	\item \acrshort{pep} Security AG, a company based in Switzerland and Luxembourg, developing commercial \acrshort{pep} app and plugin implementations
\end{enumerate}
\vspace{-5pt}
The principle design goal of \acrshort{pep} is being easy-to-install and easy-to-use. \acrshort{pep} is strongly based on OpenPGP and its message format, but introduces several enhancements and new concepts in favor of usability and ease-to-use. The major conceptual improvement consists of depending less on user interaction and automatizing procedures, as well as moving forward to a security by
default instead of a security by opt-in philosophy. Up to point of this paper, there exist three major implementations of \acrshort{pep} that can already be
purchased and downloaded for usage: a Microsoft Outlook Plugin, a Mozilla Thunderbird plugin and a Google Android mobile app. Furthermore there is an Apple iOS mobile app announced to be in development and released soon \cite{pep-whitepaper}.
\newline
\newline
\textbf{Automatic Key Management}\newline
To achieve its primary design goal, \acrshort{pep} is designed to work without prior configuration by the user and to provide encryption by default and without user interaction \cite{pep-whitepaper}. The own \acrshort{pgp} key pair is automatically generated in background upon first usage of \acrshort{pep}, or imported automatically if the user previously used \acrshort{pgp} and already has a key pair on his system. Key pairs generated by \acrshort{pep} are RSA 4096 key pairs by default. If in the latter case an existing \acrshort{pgp} key pair has less than 2048 bit length, a new key pair is generated instead of using the old key, such that the \acrshort{pep} security level does not fall below the commonly recommended RSA key length of 2048 bit for todays usage \cite{pep-email-format-protocols}.
The own public key is always attached as file \emph{pEpkey.asc} to each outgoing email, and consequently the public keys of other pEp users are received respectively by incoming mails \cite{pep-email-format-protocols}. Those public keys extracted from incoming mails are imported automatically into \acrshort{pep}. Using this key management approach, \acrshort{pep} does not depend on any centralized infrastructure such as key servers (as for \acrshort{pgp}) or a \acrshort{pki} based on external certification authorities (as for \acrshort{smime}). As consequence, the manual key import by the user as it is known for \acrshort{pgp} is circumvented and key management is fully automated. Encryption is applied by default once received the communication partner's public key, i.e. the user does not have to opt-in encryption manually.
\newline
\newline
\textbf{\acrshort{pep} Handshake}\newline
A careful reader will recognize that the automatic key import mechanism explained above is vulnerable to a potential \acrfull{mitm} attacker: He could replace the legitimate key in the mail attachment with his own key file. This fraudulent key would then be imported automatically without further verification, and the attacker could decrypt all mails sent to the victim whose key was replaced.
\newline
To mitigate this risk, pEp let's its users do a so-called \acrshort{pep} handshake: Once both \acrshort{pep} users received an email from the respective other user and thus having received its public key, \acrshort{pep} offers an option to verify the fingerprint of the received key. This is done by comparing so-called trustwords, which are shown on the screens of both users. These trustwords have to be compared via an out-of-band process, e.g. a phone call or any other secure instant messenger. Trustwords are 16-bit mappings between natural language words (e.g. english language) and the bitwise XOR of the own public key and the one of the communication partner \cite{pep-trustwords}. If the trustwords shown to both users are equivalent, the received key is verified and can be trusted, with no \acrshort{mitm}-attacker being present. The users can select to either trust or mistrust the other party's public key according to the result of the trustword
comparison. To support compatibility with \acrshort{pgp} users, the key fingerprint is also shown next to the trustwords, so that pEp users can always fall back to directly comparing fingerprints with non-pEp users \cite{pep-handshake}.
\newline
\newline
\textbf{Enhanced Security Status Transparency}\newline
\acrshort{pep} strives to make the security status of each individual communication channel (i.e. an email exchange with a certain recipient) more transparent and easy to assess for users. It does so by using a standardized color scheme which represents the security status of a channel. The status of no cryptographical end-to-end protection being applied is represented by grey colored icon, displayed by a visually dominant icon in the graphical interface when writing a new mail. This status corresponds to email communication with a recipient that do not use \acrshort{pep}, or to the very first mail sent to another \acrshort{pep} user \cite{pep-whitepaper}. Once received the public key of the recipient as \acrshort{email} attachment, future \acrshort{email}s to that recipient will be sent encrypted and integrity protected, represented by a yellow colored icon. After two users successfully performed a handshake and chose to trust the other party's public
key, this status is represented by a green icon \cite{pep-whitepaper}. In case there is a trustword mismatch (a potential \acrshort{mitm}-attacker in place) and the users choose to mistrust the received key, this status is represented by a red colored icon. It is important to mention that the step of mistrusting a public
key is non-reversible and can't no be undone other than deinstalling the \acrshort{pep} instance -- which evidently would also delete any positive handshake results \cite{pep-documentation}.