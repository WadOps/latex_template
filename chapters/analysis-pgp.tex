\section{Analysis of end-to-end Encryption Technologies for Emails}
\label{chap:analysis-encryption}

\subsection{ \acrfull{pgp} }
\label{chap:analysis-pgp}

Developed by Phil Zimmermann in 1991, \acrfull{pgp} is an encryption program that provides cryptographic privacy and authentication for data communication. \acrshort{pgp} is used for signing, encrypting, and decrypting texts, e-mails, files, directories, and whole disk partitions and to increase the security of e-mail communications. In this study we will focus only on using \acrshort{pgp} for \acrshort{email} security (\acrshort{email} encryption). It follows the OpenPGP standard for encrypting and decrypting data. Many \acrshort{email} clients provide OpenPGP-compliant \acrshort{email} security as described in RFC 3156 \cite{rfc3156}. The current specification is RFC 4880 (November 2007) \cite{rfc4880}. \acrshort{pgp} encryption uses a serial combination of hashing algorithms (SHA-1, SHA-224 / 256 / 384 / 512), data compression algorithms (zip, zlib, and bzip2), symmetric encryption algorithms (3DES, AES-128 / 192 / 256, CAST5, IDEA) and finally asymmetric encryption algorithms (ElGamal, RSA (MUST NOT <1024 bits)).

In \acrshort{pgp}, one-off key is generated randomly, which is known as the session key. The session key encrypts the message, which is the bulk of the data that needs to be sent. This type of encryption is relatively efficient, but it has a problem of sharing the session key with your recipient because without the key your recipient will only see the ciphertext. \acrshort{pgp} solves this problem with public-key cryptography, also known as asymmetric cryptography. In this kind of encryption there are two keys: a public key and a private one. The public key of your potential correspondent can be found by searching through key servers or by asking the person directly. Moreover, each public key is bound to an \acrshort{email} address and has a unique fingerprint which can be used to get the right corresponding public key \cite{pgpWiki}. In \acrshort{pgp}, public-key encryption isn't used to encrypt the message, just the one-off session key that was generated to encrypt it. It would take too long and use a larger amount of computational resources. Since the body of the message usually contains the bulk of the data, \acrshort{pgp} uses the more economical symmetric-key encryption for this. It reserves the lumbering public-key encryption for the session key, making the whole process more efficient. Our written signatures are frequently used to verify that we are who we say we are. They are far from foolproof, but they are still a useful way of preventing fraud.
\newline
Digital signatures are similar, using public-key cryptography to authenticate that the data comes from the source it claims to and that it has not been tampered with. Digital signatures work by using an algorithm to combine the sender's private key with the data that they are authenticating. The plaintext of the message is fed through a hash function, which is an algorithm that transforms inputs into a fixed-size block of data, called a message digest. The message digest is then encrypted with the sender's private key. This encrypted message digestis what is known as the digital signature \cite{pgpTech}. In \acrshort{pgp}, the digital signature is sent alongside the message body (which can either be encrypted or in plaintext). When someone receives a digitally signed \acrfull{email}, they can check its authenticity and integrity by using the public key of the sender. First, a hash function is used on the message that was received and this gives the message digest of the email in its current form \cite{pgpTech}. The next step is to calculate the original message digest from the digital signature that was sent. The sender's public key is used to
decrypt the digital signature, and this gives the message digest exactly as it was when it was signed by the sender. The final step is to compare the message digest from the email they received to the message digest that they derived from the digital signature. If the message has been altered, then the message digests will be completely different, and the recipient will know that there is a problem with the message. If the two message digests are not identical, there are three likely culprits \cite{pgpTech}:
\begin{itemize}
	\item The public key used to decrypt the digital signature was not linked to the private key that was used to encrypt it. This means that the sender may not be who they say they are.
	\item The digital signature may be fake.
	\item The message has been changed since it was signed.
\end{itemize}
In addition to all these security measures, another important factor is the emails attachments. PGP can also be used to encrypt your attachments. There are a two of ways to do this:
\begin{itemize}
	\item One approach to encrypt an email with \acrshort{pgp} is to encrypt everything separately. This means that the message body and attachments are individually encrypted and signed. It’s called PGP/Inline \cite{pgpAttachements}.
	\item A newer approach is PGP/MIME, which - in contrast to PGP/Inline - encrypts and signs the message as a whole, including attachments \cite{pgpAttachements}.
\end{itemize}
Finally, \acrshort{pgp} relies on the concept of web of trust to establish trust between the users. it is critical that the public key used to send messages to someone or some entity actually does 'belong' to the intended recipient [5]. Simply downloading a public key from somewhere is not a reliable assurance of that association. The web of trust grew as a way of vetting that each PGP public key and user are really connected to the person or organization that they are said to represent. The web of a trust connects the real-life entity with their public key by using a third party to sign the user’s PGP public-key and it does it all without a central authority that can collapse or be corrupted [6]. If a user knows another PGP user personally, he can confirm that their public key is linked to their actual identity. He can put his trust in them and digitally sign his public-key, which shows that at least one person vouches for his identity. Then, he can also do the same. Over time, this builds an interconnected web of trust, with lots of people vouching for each other with digital signatures that verify their ownership of a public key.

In conclusion, \acrshort{pgp} encryption leverages a range of techniques to provide secure and private email communications. These include compression, public-key encryption, symmetric encryption, digital signatures, and the web of trust. Together, these allow its users to send encrypted messages in an efficient manner. It also let them check whether a message is authentic and has not been altered. The OpenPGP standard was formed so that everyone could use it for free, helping to make it the most widespread form of email encryption and protect the privacy of email users.